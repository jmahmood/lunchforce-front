  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">
          <img alt="LunchForce" src="assets/sandwich-311262_640.png">
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home <span class="sr-only">(current)</span></a></li>
          <li (click)="goEnrollment()"><a href="#">Enrollment</a></li>
          <li>
            <a href="#">Settings</a>
          </li>
        </ul>
    </div><!-- /.container-fluid -->
  </nav>
  <div class="container">
    <div *ngIf="state=='waiting'">waiting...</div>
    <div *ngIf="state=='loadmyevents'">loading your upcoming lunch data...</div>

    <form id="enrollmentForm" *ngIf="state=='enrollment'" (submit)="onSubmitEnrollment();">
      <h2>Enrollment: </h2>
        <!-- Create an account, select a place. -->


      <div class="alert alert-danger" role="alert" [hidden]="enrollment.error_messages.length == 0">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        <span class="sr-only">Error:</span>
        <span *ngFor="let err_msg of enrollment.error_messages">
            {{err_msg}}<br>
        </span>
      </div>


      <div class="form-group">
        <label for="enrollmentEmail">Email address</label>
        <input type="email" class="form-control" id="enrollmentEmail" name="enrollmentEmail" placeholder="Email" [(ngModel)]="enrollment.email" required #enrollmentEmail="ngModel" email="true">
        <div [hidden]="enrollmentEmail.valid || enrollmentEmail.pristine && !enrollment.submitted"
             class="alert alert-danger">
          You must enter a valid email.
        </div>
      </div>

      <div class="form-group">
        <label for="enrollmentPassword">Password</label>
        <input type="password" class="form-control" id="enrollmentPassword" name="enrollmentPassword"
               placeholder="Password" [(ngModel)]="enrollment.password" minlength="8" #enrollmentPassword="ngModel"
               required>
        <div [hidden]="enrollmentPassword.valid || enrollmentPassword.pristine"
             class="alert alert-danger">
          You must enter a password of more than 8 characters.
        </div>
      </div>

      <div class="form-group">
        <label for="enrollmentInvitationCode">Invitation Code</label>
        <input type="text" class="form-control" id="enrollmentInvitationCode" name="enrollmentInvitationCode"
               placeholder="abc-123" [(ngModel)]="enrollment.invitation_code" required>
        <div [hidden]="enrollmentPassword.valid"
             class="alert alert-warning">
          You cannot enroll without an invitation code
        </div>
      </div>

      <div class="form-group">
        <label for="selectWhitelist">I like</label>
        <select multiple="multiple" id="selectWhitelist" name="selectWhitelist" class="form-control"
                [(ngModel)]="enrollment.whitelist">
          <option *ngFor="let foodOption of foodOptions" id="{{foodOption.id}}">{{foodOption.name}}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="selectLocation">I can meet you near</label>
        <select multiple="multiple" id="selectLocation" class="form-control">
          <option *ngFor="let locationOption of locationOptions" id="{{locationOption.id}}">{{locationOption.name}}</option>
        </select>
      </div>


      <button class="btn btn-default">Submit</button>
    </form>

    <hr>

  <form id="loginForm" *ngIf="state=='login'" (submit)="onSubmitLogin()">

      <div class="alert alert-danger" role="alert" [hidden]="login.error_messages.length == 0">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        <span class="sr-only">Error:</span>
        <span *ngFor="let err_msg of login.error_messages">
            {{err_msg}}<br>
        </span>
      </div>
      <div class="alert alert-success" role="alert" [hidden]="!enrollment.submitted || !enrollment.success">
        <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
        Your Enrollment was successful.  Please log in using the same email and password.
      </div>

    <h2>Login: </h2>

    <div class="form-group">
      <label for="loginFormEmail">Email address</label>
      <input type="email" class="form-control" id="loginFormEmail" name="loginFormEmail"
             placeholder="Email" [(ngModel)]="login.email" #loginFormEmail="ngModel" email="true" required>
    </div>

    <div class="form-group">
      <label for="loginFormPassword">Password</label>
      <input type="password" class="form-control" id="loginFormPassword" name="loginFormPassword"
               placeholder="Password" [(ngModel)]="login.password" minlength="8" #loginFormPassword="ngModel"
               required>
    </div>
    <button class="btn btn-default">Submit</button>
  </form>

    <hr>

  <form id="searchForm"  *ngIf="state=='search'">
    <div class="form-group">
      <label for="searchDate">Date</label>
      <input type="date" class="form-control" id="searchDate" placeholder="Email">
    </div>
    <button type="submit" class="btn btn-default">Submit</button>

    <h2>Upcoming Public Lunches: </h2>
    <h4>filter</h4>
    <ul class="nav nav-pills">
      <li role="presentation" class="active"><a href="#">⚥</a></li>
      <li role="presentation"><a href="#">♂</a></li>
      <li role="presentation"><a href="#">♀</a></li>
    </ul>

    <table class="table" id="SearchResultTable" *ngIf="searching && searchResultIterator.length > 0; else noResultsFound">
      <tr *ngFor="let app of searchResultIterator; let i=index">
      </tr>
    </table>
    <ng-template #noResultsFound>
      <p *ngIf="searching">No search results found.</p>
    </ng-template>
  </form>

  <hr>

  <div *ngIf="state=='myevents'">
    <h2>My Upcoming Lunch: </h2>
    <h4>filter</h4>
    <ul class="nav nav-pills">
      <li role="presentation" class="active"><a href="#">All</a></li>
      <li role="presentation"><a href="#">Empty Only</a></li>
      <li role="presentation"><a href="#">Lunch Only</a></li>
    </ul>

    <table class="table" id="AppointmentTable">
      <tr *ngFor="let app of dateIterator; let i=index">
        <td>{{i}}</td>
        <td>{{app.date | date:'yyyy-MM-dd'}}</td>
        <td><div *ngIf="app.title; else youHaveNoAppointment">{{app.title}}</div><ng-template #youHaveNoAppointment>No Appointment.  <a>Find a lunch friend?</a></ng-template></td>
        <td>
          <div *ngIf="app.people.length > 0">
            <ul class="list-group"><li class="list-group-item" *ngFor="let peep of app.people">{{peep}}</li></ul>
          </div>
        </td>
      </tr>
    </table>
  </div>

</div>
